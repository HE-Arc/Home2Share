{% extends 'main/base.html' %}

{% block title %}Details | {{ house.name }}{% endblock %}

{% block content %}
<div class="container">
  <div class="row">
    <div class="col-md-12">
      <h1 class="display-4">{{ house.name }}</h1>
      <p>{{ house.description }}</p>

      <hr/>

      <img src="{{ house.image.url }}" alt="House picture">

      <h3>Statistics</h3>

      <ul>
        <li>Country : {{ house.country }}</li>
        <li>City : {{ house.city }}</li>
        <li>Street : {{ house.street_name }} {{ house.street_number }}</li>
        <li>Room : {{ house.room_quantity }}</li>
        <li>People : {{ house.person_quantity }}</li>
        <li>Price : {{ house.price }}</li>
      </ul>

      {% if house.user.username == request.user.username %}
      <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
        <div class="btn-group mr-2" role="group" aria-label="First group">
          <a href="{% url 'house-update' house.slug_name %}" class="btn btn-success btn-sm"><i class="material-icons">mode_edit</i>Update</a>
        </div>
        <div class="btn-group mr-2" role="group" aria-label="Second group">
          <a href="{% url 'house-delete' house.slug_name %}" class="btn btn-warning btn-sm"><i class="material-icons">delete_forever</i>Delete</a>
        </div>
      </div>
      {% endif %}

      <h2>Comments</h2>
      <h3>Add a new comment</h3>
      <form method="post" action="{% url 'house-comment-create' house.slug_name %}">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Submit</button>
      </form>
      <h3>Comment list</h3>
      {% for comment in comments %}

        <h4>{{ comment.user }}</h4>
        <p>{{ comment.body }}</p>

        {% if comment.user.username == request.user.username %}
        <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
          <div class="btn-group mr-2" role="group" aria-label="First group">
            <a href="{% url 'comment-update' comment.id %}" class="btn btn-success btn-sm"><i class="material-icons">mode_edit</i>Update</a>
          </div>
          <div class="btn-group mr-2" role="group" aria-label="Second group">
            <a href="{% url 'comment-delete' comment.id %}" class="btn btn-warning btn-sm"><i class="material-icons">delete_forever</i>Delete</a>
          </div>
        </div>
        {% endif %}

      {% empty %}

        <p>No comment yet</p>

      {% endfor %}



    </div>
  </div>
</div>
{% endblock %}
